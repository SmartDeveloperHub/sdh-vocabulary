<!DOCTYPE html>
<html lang="{{ publication.metadata.language }}">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="{{ publication.metadata.description }}"/>
    <meta name="keywords" content="Ontologies{% for keyword in publication.metadata.keywords %}, {{ keyword }}{% endfor %}"/>
  {% for author in publication.metadata.authors %}
    <meta name="author" content="{{ author  }}"/>
  {% endfor %}

    <title>{{ publication.title }}</title>
 
    <link rel="stylesheet" type="text/css" href="assets/themes/blue/style.css" media="print, projection, screen">
    <link rel="stylesheet" type="text/css" href="assets/css/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/css/vocab.css">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>

    <script type="text/javascript" src="assets/js/jquery-1.11.0.js"></script>
    <script type="text/javascript" src="assets/js/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.stickytableheaders.js"></script>
    <script type="text/javascript" src="assets/js/jquery-ui.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript" id="js">
      $(document)
        .ready(function () {
          $("#tablesorter-demo").tablesorter();
          $("#tablesorter-demo").stickyTableHeaders();
          $('[data-toggle="tooltip"]').tooltip();
        });
    </script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]> <script src="vocab/js/html5shiv.js"></script> <![endif]-->

    <!-- Fav and touch icons -->
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active">
              <a href="#">Vocabularies</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <!-- Jumbotron -->
      <div class="jumbotron">
        <h1>{{ publication.title }}</h1>
        <p class="lead">
          Here you can find the list of vocabularies that <a href="{{ publication.owner.uri }}">{{ publication.owner.name }}</a> is developing and publishing on the Web.
        </p>
      </div>
      <hr/>
      <div class="row">
        <div class="ui-widget">
          <div class="col-md-3">
            <p class="text-right">
              <label for="tags">Filter by title or domain:</label>
            </p>
          </div>
          <div class="col-md-8">
            <input class="form-control" id="tags"/>
            <button
              id="remButt"
              class="label label-default"
              onclick="showRows();"
              style="font-size: 75%; font-weight: bold; line-height: 1; display: none;">
              <span class="submit glyphicon glyphicon-remove"></span>Remove filter
            </button>
          </div>
        </div>
      </div>
      <br/>
      <table id="tablesorter-demo" class="tablesorter table table-hover table-responsive">
        <thead>
          <tr>
            <th class="col-md-2">Ontology</th>
            <th class="col-md-2">Serialization</th>
            <th class="col-md-1">License</th>
            <th class="col-md-1">Language</th>
            <th class="col-md-2">Domain</th>
            <th class="col-md-4">Description</th>
          </tr>
        </thead>
        <tbody>
        {% if publication.ontologies %}
          {% for onto in publication.ontologies %}
           <tr id="tr{{ loop.index }}">
            <td>
              <a href="{{ onto.uri }}" target="_blank">{{ onto.title }}</a>
              <a href="ontologies/{{ onto.id  }}.html" target="_blank">
                <span
                  class="glyphicon glyphicon-info-sign"
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="More information about this vocabulary"></span>
              </a>
            </td>
            <td>
              {# 
                 NOTE: 
                 For the time being this set is fixed, but we should allow 
                 defining dynamically which are the supported media types
                 and which one is the canonical implementation
              #}
              <span class="label label-primary">rdf+xml</span>
              <span class="label label-primary">turtle</span>
              <span class="label label-primary">ld+json</span>
              <span class="label label-primary">html</span>
            </td>
            <td>
            {% if onto.licenses %}
              {% for license in onto.licenses %}
              <a href="{{ license.uri }}" target="_blank">
                <span class="label label-success">{{ license.label }}</span>
              </a>
              {% endfor %}
            {% else %}
              <span class="label label-default">Undefined</span>
            {% endif %}
            </td>
            <td>
            {% if onto.languages %}
              {% for lang in onto.languages %}
              <a href="{{ lang.uri }}" target="_blank">
                <span
                  class="label label-primary"
                  data-toggle="tooltip"
                  data-placement="right"
                  title="{{ lang.name }}">{{ lang.label }}</span>
              </a>
              {% endfor %}
            {% else %}
              <span class="label label-default">Undefined</span>
            {% endif %}
            </td>
            <td>
            {% if onto.domains %}
              {% for domain in onto.domains %}
              <span class="label label-primary">{{ domain }}</span>
              {% endfor %}
            {% else %}
              <span class="label label-default">Undefined</span>
            {% endif %}
            </td>
            <td>
            {% if onto.summary %}
              <p id="collapse{{ loop.index }}" data-toggle="collapse">
                {{ onto.summary }} ... <a class="more{{ loop.index }}">See more</a>
              </p>
              <script>
                $('#collapse{{ loop.index }}')
                  .click(function () {
                    if ($('a').hasClass('more{{ loop.index }}')) {
                      $('#collapse{{ loop.index }}').html('{{ onto.description }} &nbsp;<a class="less{{ loop.index }}">See less</a>');
                    } else {
                      $('#collapse{{ loop.index }}').html('{{ onto.summary }} ... &nbsp;<a class="more{{ loop.index }}">See more</a>');
                    }
                  });
              </script>
            {% elif onto.description %}
              {{ onto.description }}
            {% else %}
              <i>No description available</i>
            {% endif %}
              <input type="hidden" name="inp{{ loop.index }}" id="inp{{ loop.index }}" value="{{ onto.title }}--{% for domain in onto.domains %}{{ domain }}--{% endfor %}">
            </td>
          </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="6"><em>No ontologies available yet</em></td>
          </tr>
        {% endif %}
        </tbody>
      </table>
      <hr/>
      <footer class="footer">
        <div class="row">
          <div class="col-md-10">
            Developed by <a href="{{ publication.owner.uri }}" target="_blank">{{ publication.owner.name }}</a><br/>
            Built with <a target="_blank" href="http://getbootstrap.com/">Bootstrap</a>, with icons from <a target="_blank" href="http://glyphicons.com/">Glyphicons</a><br/>
            Latest revision {{ publication.date }}<br/>
            <p>&copy; {{ publication.copyright }}</p>
          </div>
          <div class="col-md-2">
            <a href="{{ publication.owner.uri }}" target="_blank"><img src="assets/{{ publication.owner.logo }}" alt="{{ publication.owner.name }} logo" class="img-rounded img-responsive" style="max-height:90px;"/></a>
          </div>
        </div>
      </footer>
    </div>
    <script type="text/javascript" id="tags">
      $(function () {
        var availableTags = [
        {% for tag in publication.tags %}
          "{{ tag }}"{% if not loop.last %},
        {% endif %}
        {% endfor %}

        ];
        $("#tags").autocomplete({
          select: function (event, ui) {
            hideRows(ui.item.value);
          },
          source: availableTags
        });
      });
    </script>
    <script type="text/javascript" id="table-filter">
      function hideRows(text) {
        index=1;
        tr=document.getElementById('tr'+index);
        while(tr!=null) {
          valores=document.getElementById('inp'+index).value;
          if(!valores.contains(text+'--')) {
            tr.style.display = 'none';
          }
          index+=1;
          tr=document.getElementById('tr'+index);
        }
        document.getElementById('remButt').style.display = '';
      }

      function showRows() {
        index=1;
        tr=document.getElementById('tr'+index);
        while(tr!=null) {
          tr.style.display='';
          index+=1;
          tr=document.getElementById('tr'+index);
        }
        butt = document.getElementById('remButt').style.display = 'none';
      }
    </script>
  </body>
</html>